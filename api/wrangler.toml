name = "midnight-mcp-api"
main = "src/index.ts"
compatibility_date = "2024-12-01"

[vars]
ENVIRONMENT = "production"

# Secrets (set via `wrangler secret put <NAME>`):
# - OPENAI_API_KEY: OpenAI API key for embeddings
# - DASHBOARD_PASSWORD: Password for dashboard access
# - GITHUB_WEBHOOK_SECRET: Secret for verifying GitHub webhook signatures

# Vectorize index for semantic search
[[vectorize]]
binding = "VECTORIZE"
index_name = "midnight-code"

# KV namespace for metrics storage
[[kv_namespaces]]
binding = "METRICS"
id = "adc06e61998c417684ee353791077992"

# Rate limiting
# [[unsafe.bindings]]
# name = "RATE_LIMITER"
# type = "ratelimit"
# namespace_id = "1"
# simple = { limit = 60, period = 60 }
